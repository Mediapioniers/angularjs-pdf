/*!
 * Angular-PDF: An Angularjs directive <ng-pdf> to display PDF in the browser with PDFJS.
 * @version 2.0.0
 * @link https://github.com/sayanee/angular-pdf#readme
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("angular")):"function"==typeof define&&define.amd?define("pdf",["angular"],t):"object"==typeof exports?exports.pdf=t(require("angular")):e.pdf=t(e.angular)}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s="./src/angular-pdf.module.js")}({"./src/angular-pdf.directive.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NgPdf=["$window","$document","$log",function(e,t,n){"ngInject";var o=function(t){var n=t.getContext("2d");return(e.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)},r=function(e,t,n){var r=o(e);return e.width=Math.floor(t*r),e.height=Math.floor(n*r),e.style.width=Math.floor(t)+"px",e.style.height=Math.floor(n)+"px",e.getContext("2d").setTransform(r,0,0,r,0,0),e},a=function(e,t){angular.element(t).addClass("rotate0"),e.append(t)};return{restrict:"E",templateUrl:function(e,t){return t.templateUrl?t.templateUrl:"partials/viewer.html"},link:function(o,i,l){function u(){w&&w.clearRect(0,0,x.width,x.height)}function s(){u();var e={url:d,withCredentials:b};f&&(e.httpHeaders=f),d&&d.length&&(p=PDFJS.getDocument(e),p.onProgress=o.onProgress,p.onPassword=o.onPassword,p.promise.then(function(e){angular.isFunction(o.onLoad)&&o.onLoad(),h=e,o.renderPage(o.pageToDisplay),o.$apply(function(){o.pageCount=e.numPages})},function(e){e&&angular.isFunction(o.onError)&&o.onError(e)}))}var c=null,p=null,g=!1,d=o.pdfUrl,f=o.httpHeaders,h=null,P=isFinite(l.page)?parseInt(l.page):1,y="page-fit"===l.scale,m="1"===l.limitcanvasheight,v=l.scale>0?l.scale:1,x=t[0].createElement("canvas");a(i,x);var b=l.usecredentials;g=!!l.hasOwnProperty("debug")&&l.debug;var w=x.getContext("2d"),D=angular.element(e),T={},j=void 0;i.css("display","block"),D.on("scroll",function(){o.$apply(function(){o.scroll=D[0].scrollY})}),PDFJS.disableWorker=!0,o.pageNum=P,o.renderPage=function(e){isNaN(e)||!h||T[e]||j===e||(g&&n.log("renderPage(%s)",e),T[e]=!0,c&&c._internalRenderTask.cancel(),h.getPage(e).then(function(t){var a=void 0,l=void 0,u=void 0;if(y){a=t.getViewport({scale:1});var s=i[0].getBoundingClientRect();l=s.width/a.width,m&&(l=Math.min(l,s.height/a.height)),v=l}a=t.getViewport({scale:v}),r(x,a.width,a.height),u={canvasContext:w,viewport:a},c=t.render(u),c.promise.then(function(){angular.isFunction(o.onPageRender)&&o.onPageRender(),c=null,delete T[e],j=e}).catch(function(t){n.log(t),c=null,delete T[e],j=void 0})}))},o.goPrevious=function(){o.pageToDisplay<=1||(o.pageToDisplay=parseInt(o.pageToDisplay)-1,o.pageNum=o.pageToDisplay)},o.goNext=function(){o.pageToDisplay>=h.numPages||(o.pageToDisplay=parseInt(o.pageToDisplay)+1,o.pageNum=o.pageToDisplay)},o.zoomIn=function(){return y=!1,v=parseFloat(v)+.2,o.renderPage(o.pageToDisplay),v},o.zoomOut=function(){return y=!1,v=parseFloat(v)-.2,o.renderPage(o.pageToDisplay),v},o.fit=function(){y=!0,o.renderPage(o.pageToDisplay)},o.changePage=function(){o.renderPage(o.pageToDisplay)},o.rotate=function(){"rotate0"===x.getAttribute("class")?x.setAttribute("class","rotate90"):"rotate90"===x.getAttribute("class")?x.setAttribute("class","rotate180"):"rotate180"===x.getAttribute("class")?x.setAttribute("class","rotate270"):x.setAttribute("class","rotate0")},o.$watch("pageNum",function(e){o.pageToDisplay=parseInt(e),null!==h&&o.renderPage(o.pageToDisplay)}),o.$watch("pdfUrl",function(e){""!==e&&(g&&n.log("pdfUrl value change detected: ",o.pdfUrl),d=e,o.pageNum=o.pageToDisplay=P,p?p.destroy().then(function(){s()}):s())}),o.$on("$destroy",function(e){g&&n.log("Destroying scope",e,o,p),p&&p.destroy().then(function(){p=null,h=null})})}}}]},"./src/angular-pdf.module.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pdf=void 0;var o=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(o),a=n("./src/angular-pdf.directive.js"),i=t.Pdf=r.default.module("pdf",[]).directive("ngPdf",a.NgPdf).name;t.default=i},0:function(t,n){t.exports=e}})});
//# sourceMappingURL=angular-pdf.min.js.map